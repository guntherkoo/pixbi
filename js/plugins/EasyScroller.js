var EasyScroller=function(a,b){this.content=a,this.container=a.parentNode,this.options=b||{};var c=this;this.scroller=new Scroller(function(a,b,d){c.render(a,b,d)},b),this.bindEvents(),this.content.style[EasyScroller.vendorPrefix+"TransformOrigin"]="left top",this.reflow()};EasyScroller.prototype.render=function(){var a,b=document.documentElement.style;window.opera&&"[object Opera]"===Object.prototype.toString.call(opera)?a="presto":"MozAppearance"in b?a="gecko":"WebkitAppearance"in b?a="webkit":"string"==typeof navigator.cpuClass&&(a="trident");var c,d=EasyScroller.vendorPrefix={trident:"ms",gecko:"Moz",webkit:"Webkit",presto:"O"}[a],e=document.createElement("div"),f=d+"Perspective",g=d+"Transform";return e.style[f]!==c?function(a,b,c){this.content.style[g]="translate3d("+-a+"px,"+-b+"px,0) scale("+c+")"}:e.style[g]!==c?function(a,b,c){this.content.style[g]="translate("+-a+"px,"+-b+"px) scale("+c+")"}:function(a,b,c){this.content.style.marginLeft=a?-a/c+"px":"",this.content.style.marginTop=b?-b/c+"px":"",this.content.style.zoom=c||""}}(),EasyScroller.prototype.reflow=function(){this.scroller.setDimensions(this.container.clientWidth,this.container.clientHeight,this.content.offsetWidth,this.content.offsetHeight);var a=this.container.getBoundingClientRect();this.scroller.setPosition(a.left+this.container.clientLeft,a.top+this.container.clientTop)},EasyScroller.prototype.bindEvents=function(){var a=this;if(window.addEventListener("resize",function(){a.reflow()},!1),"ontouchstart"in window)this.container.addEventListener("touchstart",function(b){b.touches[0]&&b.touches[0].target&&b.touches[0].target.tagName.match(/input|textarea|select/i)||(a.scroller.doTouchStart(b.touches,b.timeStamp),b.preventDefault())},!1),document.addEventListener("touchmove",function(b){a.scroller.doTouchMove(b.touches,b.timeStamp,b.scale)},!1),document.addEventListener("touchend",function(b){a.scroller.doTouchEnd(b.timeStamp)},!1),document.addEventListener("touchcancel",function(b){a.scroller.doTouchEnd(b.timeStamp)},!1);else{var b=!1;this.container.addEventListener("mousedown",function(c){c.target.tagName.match(/input|textarea|select/i)||(a.scroller.doTouchStart([{pageX:c.pageX,pageY:c.pageY}],c.timeStamp),b=!0,c.preventDefault())},!1),document.addEventListener("mousemove",function(c){b&&(a.scroller.doTouchMove([{pageX:c.pageX,pageY:c.pageY}],c.timeStamp),b=!0)},!1),document.addEventListener("mouseup",function(c){b&&(a.scroller.doTouchEnd(c.timeStamp),b=!1)},!1),this.container.addEventListener("mousewheel",function(b){a.options.zooming&&(a.scroller.doMouseZoom(b.wheelDelta,b.timeStamp,b.pageX,b.pageY),b.preventDefault())},!1)}},document.addEventListener("DOMContentLoaded",function(){for(var a,b=document.querySelectorAll("[data-scrollable],[data-zoomable]"),c=0;c<b.length;c++){a=b[c];var d=a.dataset.scrollable,e=a.dataset.zoomable||"",f=e.split("-"),g=f.length>1&&parseFloat(f[0]),h=f.length>1&&parseFloat(f[1]);new EasyScroller(a,{scrollingX:"true"===d||"x"===d,scrollingY:"true"===d||"y"===d,zooming:"true"===e||f.length>1,minZoom:g,maxZoom:h})}},!1);